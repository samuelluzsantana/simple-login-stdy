# Backend - API de AutenticaÃ§Ã£o

API REST para autenticaÃ§Ã£o de usuÃ¡rios construÃ­da com Bun e TypeScript.

## ğŸš€ Tecnologias

- **Bun** - Runtime JavaScript rÃ¡pido
- **TypeScript** - Tipagem estÃ¡tica
- **API REST** - Endpoints HTTP

## ğŸ“ Estrutura de Pastas

```
backend/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts        # Servidor principal e rotas
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ bun.lock
```

## ğŸ› ï¸ InstalaÃ§Ã£o

```bash
# Instalar dependÃªncias
bun install
```

## ğŸ’» Desenvolvimento

```bash
# Iniciar servidor com hot reload
bun run dev
```

Servidor rodando em: http://localhost:3001

## ğŸ—ï¸ ProduÃ§Ã£o

```bash
# Iniciar servidor
bun run start
```

## ğŸ“¡ API Endpoints

### POST `/api/register`

Cadastra um novo usuÃ¡rio.

**Request Body:**
```json
{
  "name": "JoÃ£o Silva",
  "email": "joao@email.com",
  "password": "123456"
}
```

**Response (201 Created):**
```json
{
  "message": "UsuÃ¡rio cadastrado com sucesso",
  "user": {
    "id": 1,
    "name": "JoÃ£o Silva",
    "email": "joao@email.com"
  }
}
```

**Erros:**
- `400` - Campos obrigatÃ³rios faltando
- `400` - Email jÃ¡ cadastrado

---

### POST `/api/login`

Realiza login de um usuÃ¡rio.

**Request Body:**
```json
{
  "email": "joao@email.com",
  "password": "123456"
}
```

**Response (200 OK):**
```json
{
  "message": "Login realizado com sucesso",
  "user": {
    "id": 1,
    "name": "JoÃ£o Silva",
    "email": "joao@email.com"
  }
}
```

**Erros:**
- `401` - Email ou senha invÃ¡lidos

## ğŸ”§ ConfiguraÃ§Ã£o CORS

A API estÃ¡ configurada para aceitar requisiÃ§Ãµes de qualquer origem:

```typescript
const corsHeaders = {
  "Access-Control-Allow-Origin": "*",
  "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
  "Access-Control-Allow-Headers": "Content-Type",
};
```

Para produÃ§Ã£o, substitua `*` pela URL do seu frontend.

## ğŸ’¾ Banco de Dados

Atualmente utiliza armazenamento em memÃ³ria (array). Para produÃ§Ã£o, integre com:

- **PostgreSQL** - `bun add pg`
- **MySQL** - `bun add mysql2`
- **MongoDB** - `bun add mongodb`
- **Prisma** - `bun add prisma @prisma/client`

### Exemplo com Prisma:

```typescript
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

// Criar usuÃ¡rio
const user = await prisma.user.create({
  data: { name, email, password: hashedPassword }
});
```

## ğŸ” SeguranÃ§a (ProduÃ§Ã£o)

Para ambiente de produÃ§Ã£o, implemente:

1. **Hash de senhas** com bcrypt:
```typescript
import { hash, compare } from 'bcryptjs';

const hashedPassword = await hash(password, 10);
const isValid = await compare(password, hashedPassword);
```

2. **JWT** para autenticaÃ§Ã£o:
```typescript
import jwt from 'jsonwebtoken';

const token = jwt.sign({ userId: user.id }, process.env.JWT_SECRET);
```

3. **ValidaÃ§Ã£o** com Zod:
```typescript
import { z } from 'zod';

const registerSchema = z.object({
  name: z.string().min(2),
  email: z.string().email(),
  password: z.string().min(6),
});
```

## ğŸ“œ Scripts DisponÃ­veis

| Script | DescriÃ§Ã£o |
|--------|-----------|
| `bun run dev` | Inicia servidor com hot reload |
| `bun run start` | Inicia servidor de produÃ§Ã£o |

## ğŸ§ª Testando a API

Com curl:

```bash
# Cadastrar usuÃ¡rio
curl -X POST http://localhost:3001/api/register \
  -H "Content-Type: application/json" \
  -d '{"name":"JoÃ£o","email":"joao@email.com","password":"123456"}'

# Fazer login
curl -X POST http://localhost:3001/api/login \
  -H "Content-Type: application/json" \
  -d '{"email":"joao@email.com","password":"123456"}'
```

## ğŸ“Š Arquitetura

```
Cliente (Frontend)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API (Bun)      â”‚
â”‚   :3001          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  POST /register  â”‚
â”‚  POST /login     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Banco de Dados  â”‚
â”‚  (em memÃ³ria)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
